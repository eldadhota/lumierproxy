<!DOCTYPE html><html><head><title>Lumier Dynamics - Browser Sessions</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><style>` + baseStyles + `.devices-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:15px;margin-top:20px}.device-card{background:#1a1a1a;border-radius:12px;padding:18px;border:1px solid #2a2a2a;transition:all 0.2s}.device-card:hover{border-color:#4a9eff}.device-card.ap{border-left:4px solid #4a9eff}.device-card.legacy{border-left:4px solid #9c7aff}.device-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}.device-name{font-size:1.1em;font-weight:600;color:#e0e0e0}.device-type{font-size:0.75em;padding:3px 8px;border-radius:10px;font-weight:600}.device-type.ap{background:#1a2a3a;color:#4a9eff}.device-type.legacy{background:#2a1a3a;color:#9c7aff}.device-info{display:grid;gap:8px;font-size:0.9em}.info-row{display:flex;justify-content:space-between}.info-label{color:#666}.info-value{color:#e0e0e0;font-weight:500}.sessions-table{width:100%;border-collapse:collapse;margin-top:15px}.sessions-table th,.sessions-table td{padding:12px;text-align:left;border-bottom:1px solid #2a2a2a}.sessions-table th{background:#121212;font-weight:600;color:#888;font-size:0.85em;text-transform:uppercase}.sessions-table tr:hover{background:#252525}.empty-state{text-align:center;padding:60px 20px;color:#666}.empty-state h3{color:#888;margin-bottom:10px}.client-download{background:#1a1a1a;border-radius:12px;padding:25px;border:1px solid #2a2a2a;margin-bottom:25px}.client-download h2{margin-bottom:15px;color:#e0e0e0}.download-btns{display:flex;gap:15px;flex-wrap:wrap}.download-btn{display:flex;align-items:center;gap:10px;background:#4a9eff;color:white;padding:12px 24px;border-radius:8px;text-decoration:none;font-weight:600;transition:background 0.2s}.download-btn:hover{background:#3a8eef}.how-it-works{background:#121212;border-radius:8px;padding:15px;margin-top:15px}.how-it-works h4{color:#4a9eff;margin-bottom:10px}.how-it-works ol{margin:0;padding-left:20px;color:#888}.how-it-works li{margin-bottom:8px}</style></head><body>` + navHTML + `<div class="main-content"><div class="page-header"><h1>üåê Browser Sessions</h1><p>Windows client for browsing through device proxies</p></div><div class="client-download"><h2>üíª Windows Client</h2><p style="color:#888;margin-bottom:15px">Download and run the client on your Windows PC to browse the web using any approved device's proxy.</p><div class="download-btns"><a href="/api/browser-profiles/client-download" class="download-btn">‚¨áÔ∏è Download Client (Windows)</a></div><div class="how-it-works"><h4>How It Works:</h4><ol><li>Run the downloaded .exe file</li><li>Enter the server URL and your name</li><li>Select any approved device from the list</li><li>Firefox opens with that device's proxy - all traffic routes through it</li><li>Close Firefox to end the session (logged for auditing)</li></ol></div></div><div class="stats-grid"><div class="stat-card"><div class="stat-value" id="totalDevices">-</div><div class="stat-label">Available Devices</div></div><div class="stat-card"><div class="stat-value" id="totalSessions">-</div><div class="stat-label">Total Sessions</div></div><div class="stat-card"><div class="stat-value" id="sessionsToday">-</div><div class="stat-label">Sessions Today</div></div></div><div class="card"><h2>üì± Available Devices</h2><p style="color:#888;margin-bottom:15px">These approved devices are available for selection in the Windows client</p><div id="devicesGrid" class="devices-grid"><div class="loading">Loading devices...</div></div></div><div class="card" style="margin-top:25px"><h2>üìã Session Log</h2><p style="color:#888;margin-bottom:15px">Audit log of browser client usage - who used which device's proxy</p><table class="sessions-table"><thead><tr><th>User</th><th>Device</th><th>Proxy</th><th>Started</th><th>Duration</th></tr></thead><tbody id="sessionsBody"><tr><td colspan="5" style="text-align:center;color:#666;padding:30px">No sessions recorded yet</td></tr></tbody></table></div></div><script>` + baseJS + `document.getElementById('nav-browsers').classList.add('active');function loadDevices(){fetch('/api/client/profiles').then(r=>r.json()).then(data=>{const devices=data.devices||[];document.getElementById('totalDevices').textContent=devices.length;const grid=document.getElementById('devicesGrid');if(!devices.length){grid.innerHTML='<div class="empty-state"><h3>No devices available</h3><p>Approve devices in the Devices tab to make them available here</p></div>';return;}grid.innerHTML=devices.map(d=>{const typeClass=d.device_type==='ap'?'ap':'legacy';const typeLabel=d.device_type==='ap'?'üì° AP':'üì± Legacy';return'<div class="device-card '+typeClass+'"><div class="device-header"><div class="device-name">'+escapeHtml(d.name)+'</div><span class="device-type '+typeClass+'">'+typeLabel+'</span></div><div class="device-info"><div class="info-row"><span class="info-label">Proxy:</span><span class="info-value" style="color:#4a9eff">'+escapeHtml(d.proxy_name||'Proxy #'+(d.proxy_index+1))+'</span></div><div class="info-row"><span class="info-label">Group:</span><span class="info-value">'+escapeHtml(d.group||'Default')+'</span></div></div></div>';}).join('');});}function loadSessions(){fetch('/api/browser-profiles/session?limit=30').then(r=>r.json()).then(sessions=>{const today=new Date().toDateString();let todayCount=0;(sessions||[]).forEach(s=>{if(new Date(s.started_at).toDateString()===today)todayCount++;});document.getElementById('totalSessions').textContent=(sessions||[]).length;document.getElementById('sessionsToday').textContent=todayCount;const tbody=document.getElementById('sessionsBody');if(!sessions||!sessions.length){tbody.innerHTML='<tr><td colspan="5" style="text-align:center;color:#666;padding:30px">No sessions recorded yet</td></tr>';return;}tbody.innerHTML=sessions.map(s=>{const started=new Date(s.started_at).toLocaleString();const dur=s.duration_seconds>0?formatDuration(s.duration_seconds):'In progress';return'<tr><td><strong>'+escapeHtml(s.username||'Unknown')+'</strong></td><td>'+escapeHtml(s.device_name||s.profile_name||s.profile_id||'-')+'</td><td style="color:#4a9eff">'+escapeHtml(s.proxy_name||'-')+'</td><td>'+started+'</td><td>'+dur+'</td></tr>';}).join('');});}function formatDuration(sec){if(sec<60)return sec+'s';if(sec<3600)return Math.floor(sec/60)+'m '+sec%60+'s';const h=Math.floor(sec/3600);const m=Math.floor((sec%3600)/60);return h+'h '+m+'m';}function escapeHtml(t){if(!t)return'';const d=document.createElement('div');d.textContent=t;return d.innerHTML;}loadDevices();loadSessions();setInterval(()=>{loadDevices();loadSessions();},30000);</script></body></html>